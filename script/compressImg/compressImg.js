!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.readdir=function(e){return new Promise((t,n)=>{r.readdir(e,(e,r)=>{if(e)return n(e);t(r)})})},t.readFile=async function(e){return new Promise((t,n)=>{r.readFile(e,"utf8",(e,r)=>{if(e)return n(e);t(r)})})},t.exists=function(e){return new Promise((t,n)=>{r.exists(e,e=>{t(e)})})},t.lstat=function(e){return new Promise((t,n)=>{r.lstat(e,(e,r)=>e?n(e):t(r))})},t.rmdir=function(e){return new Promise((t,n)=>{r.rmdir(e,e=>{if(e)return n(e);t()})})},t.unlink=function(e){return new Promise((t,n)=>{r.unlink(e,e=>{if(e)return n(e);t()})})},t.mkdir=function(e){return new Promise((t,n)=>{r.mkdir(e,e=>{!e||e&&e.code,t()})})},t.sleep=function(e){return new Promise((t,n)=>{setTimeout(()=>{t()},e)})}},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(5),i=n(6),c=n(0),s=n(7),u=n(1),a=n(8),l=n(9),f=n(11),p=c.resolve(c.dirname(process.argv[1]),"./config.json"),[d,...m]=process.argv.slice(2);async function w(e){const t=Date.now();console.log(e);let n=0;const r=e.length;await f.pMap(e,async e=>{const t=await v(e);n++,t?console.log(`${n}/${r}:>`,e,`${t}%`):console.log(`${n}/${r}:>`,e,"no compress")},{concurrency:6}),console.log("completed:>",Date.now()-t)}async function y(){const e=c.resolve(s.SRC,"res"),t=c.resolve(s.SRC,"assets"),n=a.walk(e),r=a.walk(t),o=await Promise.all([n,r]).then(e=>e[0].concat(e[1]));for(let e=o.length-1;e>=0;e--){const t=c.extname(o[e]);".png"!==t&&".jpg"!==t&&o.splice(e,1)}return o}function g(e,t){return Math.floor(e/t*100)}async function v(e){const{size:t}=await u.lstat(e);let n;if(!(n=".png"===c.extname(e)?await async function(e){try{const t=await r([e],void 0,{plugins:[i()]});return t[0].data}catch(e){return console.error(e),!1}}(e):await async function(e){try{const t=await r([e],void 0,{plugins:[o()]});return t[0].data}catch(e){return console.error(e),!1}}(e)))return!1;const s=g(n.toString().length,.9*t);return!(s>=100)&&(await l.write(e,n),s)}!async function(){await s.intConfig(p),"compressImg"===d&&(m.length?w(m):w(await y()))}(),t.compressFiles=w,t.getAllFiles=y,t.calcPercent=g,t.compressImg=v},function(e,t){e.exports=require("imagemin")},function(e,t){e.exports=require("imagemin-mozjpeg")},function(e,t){e.exports=require("imagemin-pngquant")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1);t.intConfig=async function(e){const n=await o.readFile(e),i=JSON.parse(n);t.SRC=r.resolve(i.gamehall_path)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1);t.walk=async function e(t){t=r.normalize(t);let n=[];const i=await o.readdir(t);for(const c of i){const i=r.join(t,c);if((await o.lstat(i)).isDirectory()){const t=await e(i);n=n.concat(t)}else n.push(i)}return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(0),i=n(1),c=n(10);t.write=async function(e,t){const n=o.dirname(e);await i.exists(n)||await c.mk(n),await new Promise((n,o)=>{r.writeFile(e,t,e=>{if(e)return o(e);n()})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1);t.mk=async function(e){if(await o.exists(e))return!0;const t=(e=r.normalize(e)).split(r.sep);for(let e=0;e<t.length;e++){if(!t[e])continue;const n=t.slice(0,e+1).join(r.sep);await o.exists(n)||await o.mkdir(n)}}},function(e,t,n){"use strict";e.exports.pMap=(e,t,n)=>new Promise((r,o)=>{if(n=Object.assign({concurrency:1/0},n),"function"!=typeof t)throw new TypeError("Mapper function is required");const{concurrency:i}=n;if(!("number"==typeof i&&i>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${i}\` (${typeof i})`);const c=[],s=e[Symbol.iterator]();let u=!1,a=!1,l=0,f=0;const p=()=>{if(u)return;const e=s.next(),n=f;if(f++,e.done)return a=!0,void(0===l&&r(c));l++,Promise.resolve(e.value).then(e=>t(e,n)).then(e=>{c[n]=e,l--,p()},e=>{u=!0,o(e)})};for(let e=0;e<i&&(p(),!a);e++);})}]);